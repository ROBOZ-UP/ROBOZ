{"posts":[{"title":"笔记：仿真程序设计","content":"⏰最后更新时间：2020.4.3 第一章 MATLAB基础知识 帮助命令 help命令 help 函数名 可以通过help加函数名来显示该函数的帮助说明。 help命令是查询函数语法的最基本方法，查询信息直接显示在命令窗口。在命令窗口中直接输入help命令将会显示当前帮助系统中所包含的所有项目，即搜索路径中所有的目录名称。 lookfor命令 lookfor 关键词 lookfor命令可以帮助用户查找关键词。 其他帮助命令 命令 命令功能 demo 运行演示程序 tour 运行漫游程序 doc 在帮助浏览器中显示指定函数的参考信息 what 列出当前目录下的M文件、MEX文件、MET文件 which 显示指定函数或文件的路径 helpbrowser 打开帮助内的浏览器 helpdesk 运行HTML格式的帮助面板(Help Desk) helpwin 打开帮助内的浏览器 exist 查找指定变量或函数的存在性 web 显示指定的网络页面 MATLAB的变量和数据操作 变量与赋值 变量命名 在MATLAB中，变量名是以字母开头，后接字母、数字或下画线的字符序列，最多63个字符。 在MATLAB中，变量名区分字母的大小写。 赋值语句 MATLAB赋值语句有两种格式： （1）变量=表达式； （2）表达式 在第1种语句形式下，MATLAB将右边表达式的值赋给左边的变量； 而在第2种语句形式下，将表达式的值赋给MATLAB的预定义变量ans。 在语句的最后加分号，那么，MATLAB仅仅执行赋值操作，不再显示运算的结果。 注释以%开头 常用预定义变量 预定义变量 含义 预定义变量 含义 ans 计算结果的默认赋值变量 nargin 函数输入参数个数 eps 机器零阈值 nargout 函数输出参数个数 pi 圆周率的近似值 realmax 最大正实数 i，j 虚数单位 realmin 最小正实数 inf，Inf 无穷大。如1/0的结果 lasterr 存放最新的错误信息 NaN，nan 非数。如0/0、inf/inf的结果 lastwarn 存放最新的警告信息 内存变量文件 利用MAT文件可以把当前MATLAB工作空间中的一些有用变量长久地保留下来。 MAT文件是MATLAB保存数据的一种标准格式二进制文件，扩展名是.mat。 -append选项控制将变量追加到MAT文件中。 -ascii选项使文件以ASCII格式处理，省略该选项时文件以二进制格式处理。 MAT文件的生成 save 文件名 [变量名表] [-append][-ascii] MAT文件的装入 load 文件名 [变量名表] [-ascii] 数据输出格式 format 格式符 注意，format命令只影响数据输出格式，不影响数据的计算和存储。 格式符 含义 short 输出小数点后4位，最多不超过7位有效数字。对于大于1000的实数，用5位有效数字的科学计数形式输出 long 15位有效数字形式输出 short e 5位有效数字的科学计数形式输出 long e 15位有效数字的科学计数形式输出 short g 从short和short e中自动选择最佳输出方式 long g 从long和long e中自动选择最佳输出方式 rat 近似有理数表示 hex 十六进制表示 + 正数、负数、零分别用+、-、空格表示 bank 银行格式，以元、分表示 compact 输出变量之间没有空行 loose 输出变量之间有空行 MATLAB矩阵及其基本运算 矩阵的生成 在MATLAB中，生成矩阵时无须对矩阵的维数和类型进行说明，MATLAB会根据用户所输入的内容自动进行配置。 直接输入法 将矩阵的所有元素用方括号括起来，按矩阵行的顺序输入各元素，同一行的各元素之间用空格或逗号分隔，不同行的元素之间用分号分隔。 利用M文件建立矩阵 对于比较大且比较复杂的矩阵，可以为它专门建立一个M文件 利用数据文件建立指定矩阵 用户能够通过load命令，将外部数据文件中的内容调入到工作空间中创建矩阵，外部文件的扩展名为.dat。 利用已建好的矩阵建立更大的矩阵 冒号表达式 在MATLAB中利用冒号可以产生行向量。 冒号表达式的一般格式为 a : b : c 其中，a为初始值，b为步长，c为终止值（c &gt; a）。 冒号表达式可产生一个由a开始到c结束，以步长b自增的行向量。 在MATLAB中，还可以用linspace函数产生行向量。 其调用格式为 linspace(a,b,n) 其中a和b是生成向量的第1个和最后一个元素，n是元素总数。 当n省略时，自动产生100个元素。 矩阵的拆分 矩阵元素 对矩阵的单个元素操作。 例如，如果想将矩阵A的第a行第b列的元素赋为c，则可以通过下面语句来完成： A(a,b)=c 这时将只改变该元素的值，而不影响其他元素的值。 在MATLAB中，也可以采用矩阵元素的序号来引用矩阵元素。矩阵元素的序号就是相应元素在内存中的排列顺序。矩阵元素按列编号，先第1列，再第2列，依次类推。 例如： A=[10,20,30;40,50,60]; A(3)的元素是20。 序号（Index）与下标（Subscript）是一一对应的，以m × n矩阵A为例，矩阵元素A(i, j)的序号为(j−1)*m + i。其相互转换关系也可利用sub2ind和ind2sub函数求得。 size(A) 函数返回包含两个元素的向量，分别是矩阵A的行数和列数 length(A) 给出行数和列数中的较大者,即length(A)=max(size(A)) ndims(A) 给出A的维数 reshape(A,m,n) 函数在矩阵总元素保持不变的前提下，将矩阵A重新排列成m*n的二维矩阵。 矩阵拆分 利用冒号表达式获得子矩阵 ① A(m,n)表示取A矩阵第m行、第n列的元素，A(m,:)表示取A矩阵第m行的全部元素，A(:,n)表示取A矩阵的第n列全部元素。 ② A(m1:m2,:)表示取A矩阵第m1～m2行的全部元素，A(:,n1:n2)表示取A矩阵第n1～n2列的全部元素，A(m1:m2,n1:n2)表示取A矩阵第m1～m2行内，并在第n1～n2列中的所有元素。 ③ A(:)将矩阵A每一列元素堆叠起来，成为一个列向量。 end表示某一维的末尾元素下标 利用空矩阵删除矩阵的元素 在MATLAB中，空矩阵是指无任何元素的矩阵，表示形式为[]。 给变量x赋空矩阵的语句为 x=[] 将某些元素从矩阵中删除，采用将其置为空矩阵的方法就是一种有效的方法。 例如： A=[1 2 3 4 5 6;7 8 9 10 11 12;13 14 15 16 17 18]; A(:,[2 4])=[] 其中第2条命令将删除A的第2列和第4列元素。 算术运算 基本算术运算 MATLAB的基本算术运算有：+（加）、−（减）、*（乘）、/（右除）、\\（左除）、^（乘方）。 矩阵加减运算 运算规则是：若A和B矩阵的维数相同，则可以执行矩阵的加减运算，A和B矩阵的相应元素相加减。如果A与B的维数不相同，则MATLAB将给出错误信息，提示用户两个矩阵的维数不匹配。 一个标量也可以和其他不同维数的矩阵进行加减运算。例如： x=[2,-1,0;3,2,-4]; y=x-1; y=y+x 矩阵乘法 矩阵A和B进行乘法运算，要求A的列数与B的行数相等，或称A和B两矩阵维数相容。如果两者的维数不相容，则将给出错误信息，提示用户两个矩阵是不可乘的。例如： A=[1,2,3;4,5,6]; B=A*A ??? Error using ==&gt; mtimes Inner matrix dimensions must agree. 在MATLAB中，还可以进行矩阵和标量相乘，标量可以是乘数也可以是被乘数。矩阵和标量相乘是矩阵中的每个元素与此标量相乘。 矩阵除法 在MATLAB中，有两种矩阵除法运算：\\和/，分别表示左除和右除。如果A矩阵是非奇异方阵，则A\\B和B/A运算可以实现。A\\B等效于A的逆左乘B矩阵，也就是inv(A)B，而B/A等效于A矩阵的逆右乘B矩阵，也就是Binv(A)。 inv(矩阵名) 矩阵求逆 矩阵的乘方 一个矩阵的乘方运算可以表示成A^x，要求A为方阵，x为标量。 点运算 两矩阵进行点运算是指它们的对应元素进行相关运算，要求两矩阵的维参数相同。点运算符有.*、./、.\\和.^。 如果A、B两矩阵具有相同的维数，则A./B表示A矩阵除以B矩阵的对应元素。B.\\A等价于A./B。 （与矩阵的左除、右除不同） 若两个矩阵维数一致，则A.^B表示两矩阵对应元素进行乘方运算。其中指数和底数也可以是标量。 MATLAB常用数学函数 函数名 含义 函数名 含义 sin 正弦函数 exp 自然指数函数 cos 余弦函数 pow2 2的幂 tan 正切函数 abs 绝对值函数 asin 反正弦函数 angle 复数的俯角 acos 反余弦函数 real 复数的实部 atan 反正切函数 imag 复数的虚部 sinh 双曲正弦函数 conj 复数共轭运算 cosh 双曲余弦函数 rem 求余数或模运算 tanh 双曲正切函数 mod 模除求余 asinh 反双曲正弦函数 fix 向零方向取整 acosh 反双曲余弦函数 floor 不大于自变量的最大整数 atanh 反双曲正切函数 ceil 不小于自变量的最小整数 sqrt 平方根函数 round 四舍五入到最邻近的整数 log 自然对数函数 sign 符号函数 log10 常用对数函数 gcd 最大公因子 log2 以2为底的对数函数 lcm 最小公倍数 函数使用说明： （1）函数的自变量规定为矩阵变量，运算法则是将函数逐项作用于矩阵的元素上，因而运算的结果是一个与自变量同维数的矩阵。 （2）abs函数可以求实数的绝对值、复数的模、字符串的ASCII码值。 （3）用于取整的函数有fix、floor、ceil、round，要注意它们的区别。 （4）rem与mod函数的区别。rem(x,y)和mod(x,y)要求x,y必须为相同大小的实矩阵或为标量。当y≠0时，rem(x, y) = x − y.fix(x ./ y)，而mod(x,y) = x − y . floor(x ./ y)，当y = 0时，rem(x, 0) = NaN，而mod(x,0) = x。显然，当x，y同号时，rem(x,y)与mod(x,y)相等。rem(x,y)的符号与x相同，而mod(x, y)的符号与y相同。 关系运算 MATLAB提供了6种关系运算符：&lt;（小于）、&lt;=（小于或等于）、&gt;（大于）、&gt;=（大于或等于）、= =（等于）、～=（不等于）。 （1）当两个比较量是标量时，直接比较两数的大小。若关系成立，关系表达式结果为1，否则为0。 （2）当参与比较的量是两个维数相同的矩阵时，比较是对两矩阵相同位置的元素按标量关系运算规则逐个进行，并给出元素的比较结果。最终的关系运算的结果是一个维数与原矩阵相同的矩阵，它的元素由0或1组成。 （3）当参与比较的一个是标量，而另一个是矩阵时，则把标量与矩阵的每一个元素按标量关系运算规则逐个比较，并给出元素比较结果。最终的运算结果是一个维数与矩阵相同的矩阵，它的元素由0或1组成。 逻辑运算 MATLAB提供了3种逻辑运算符：&amp;（与）、|（或）和～（非）。此外，MATLAB还提供了4个逻辑运算函数：and(a,b)、or(a,b)、not(a)和xor(a,b)。 在逻辑运算中，确认非零元素为真，用1表示；零元素为假，用0表示。设参与逻辑运算的是两个标量a和b，那么，逻辑运算符和逻辑运算函数的含义如下。 a&amp;b或函数and(a, b)表示a和b作逻辑与运算，当a、b全为非零时，运算结果为1，否则为0。 a|b或函数or(a, b)表示a和b作逻辑或运算，当a、b中只要有一个非零，运算结果为1。 ～a和函数not(a)表示对a作逻辑非运算，当a是零时，运算结果为1；当a非零时，运算结果为0。 函数xor(a, b)表示a和b作逻辑异或运算，当a、b的值不同时，运算结果为1，否则运算结果为0。 （1）若参与逻辑运算的是两个同维矩阵，那么运算将对矩阵相同位置上的元素按标量规则逐个进行。最终运算结果是一个与原矩阵同维的矩阵，其元素由1或0组成。 （2）若参与逻辑运算的一个是标量，一个是矩阵，那么运算将在标量与矩阵中的每个元素之间按标量规则逐个进行。最终运算结果是一个与矩阵同维的矩阵，其元素由1或0组成。 （3）逻辑非是单目运算符，也服从矩阵运算规则。 优先级 在算术、关系、逻辑运算中，算术运算优先级最高，逻辑运算优先级最低。 关系与逻辑运算函数 函数名 含义 all 若向量的所有元素为零，则结果为1 any 向量中任意一个元素非零，都给出结果1 exist 检测变量在工作空间是否存在，若存在结果为1；否则为0 find 找出向量或矩阵中非零元素的位置 isempty 若被查变量是空阵，则结果为1 isglobal 若被查变量是全局变量，则结果为1 isinf 若元素是±inf，则结果矩阵相应位置元素取1，否则取0 isnan 若元素是nan，则结果矩阵相应位置元素取1，否则取0 isfinite 若元素值大小有限制，则结果矩阵相应位置元素取1，否则取0 issparse 若变量是稀疏矩阵，则结果矩阵相应位置元素取1，否则取0 isstr 若变量是字符串，则结果矩阵相应位置元素取1，否则取0 INF表示“无穷大”，是infinite的缩写。NAN表示“无效数字”，是Not a number的缩写。 在矩阵中，若数值为0的元素数目远远多于非0元素的数目，并且非0元素分布没有规律时，则称该矩阵为稀疏矩阵；与之相反，若非0元素数目占大多数时，则称该矩阵为稠密矩阵。 字符串 字符串的每个字符都是字符矩阵的一个元素。其构建方式是通过单撇号括起来的字符序列来实现的。 MATLAB将一个字符串当作一个行向量，每个元素对应一个字符，其标识方法和数值向量相同。 多行字符串要求各行字符数要相等 字符串是以ASCII形式存储的。abs和double函数都可以用来获取字符串矩阵所对应的ASCII数值矩阵。相反，char函数可以把ASCII矩阵转换为字符串矩阵。 把字符串的内容作为对应的MATLAB语句来执行。 eval(t) 其中t为字符串。 字符串处理函数 函数名 含义 函数名 含义 setstr 将ASCII码值转换为字符 strcat 用于字符串的连接 findstr 查找匹配的字符串所在的位置 strcmp 用于字符串的比较 mat2str 将矩阵转换为字符串 strrep 替换匹配的字符串 num2str 将数值转换为字符串 isspace 判断是否为空格 int2str 将整数转换为字符串 ischar 判断是否为字符 str2num 将数字型字符串转换为数值 isletter 判断是否为字母 disp 显示数组。disp函数的自变量是一个长字符串。 字符串写法的注意事项： （1）若字符串中的字符含有单撇号，则该单撇号字符应用两个单撇号来表示。 （2）可以用字符串向量的形式连接多个字符串，即用中括号括起来。 第二章 MATLAB程序设计 M文件的分类 M文件可以根据调用方式的不同分为两类：命令文件（Script File）和函数文件（Function File）。扩展名均为.m。 主要分别如下： （1）命令文件没有输入参数，也不返回输出参数；而函数文件可以带输入参数，也可返回输出参数。 （2）命令文件对MATLAB工作空间中的变量进行操作，文件中所有命令的执行结果也完全返回到工作空间中；而函数文件中定义的变量为局部变量，当函数文件执行完毕时，这些变量被清除。 （3）命令文件可以直接运行，在MATLAB命令窗口输入命令文件的名字，就会顺序执行命令文件中的命令；而函数文件不能直接运行，而要以函数调用的方式来调用它。 程序控制结构 顺序结构、选择结构、循环结构 顺序结构 顺序结构是指按照程序中语句的排列顺序依次执行，一般涉及数据的输入、数据的计算或处理、数据的输出等内容。 数据的输入 从键盘输入数据，则可以使用input函数来进行，该函数的调用格式为 A=input（提示信息，选项）； 其中，“提示信息”为一个字符串，用于提示用户输入什么样的数据。 如果在input函数调用时采用's'选项，则允许用户输入一个字符串。 数据的输出 MATLAB提供的命令窗口输出函数主要有disp函数，其调用格式为 disp（输出项） 其中，输出项既可以为字符串，也可以为矩阵。 程序的暂停 当程序运行时，为了查看程序的中间结果或者观看输出的图形，有时需要暂停程序的执行。这时可以使用pause函数，其调用格式为 pause（延迟秒数) 如果省略延迟时间，则将暂停程序，直到用户按任一键后程序继续执行。 若要强行中止程序的运行可使用Ctrl+C组合键。 选择结构 选择结构是根据给定的条件成立或不成立，分别执行不同的语句。（if、swich、try） if语句 单分支if语句： if 条件 语句块 end 当条件成立时，则执行语句组，执行完之后继续执行if语句的后继语句，若条件不成立，则直接执行if语句的后继语句。 双分支if语句： if 条件 语句块1 else 语句块2 end 当条件成立时，执行语句组1，否则执行语句组2，语句组1或语句组2执行后，再执行if语句的后继语句。 多分支if语句： if 条件1 语句块1 elseif 条件2 语句块2 …… elseif 条件n 语句块n else 语句块n+1 end switch语句 switch语句根据表达式的取值不同，分别执行不同的语句，其语句格式为 switch 表达式 case 结果表1 语句块1 case 结果表2 语句块2 …… case 结果表n 语句块n otherwise 语句块n+1 end switch子句后面的表达式应为一个标量或一个字符串，case子句后面的结果不仅可以为一个标量或一个字符串，而且还可以为一个将多个结果用大括号括起来的单元数据（Cell）。如果case子句后面的结果为一个单元数据，则表达式的值等于该单元数据中的某个元素时，执行相应的语句组。 try语句 try语句是一种试探性执行语句，为开发人员提供了一种捕获错误的机制，其语句格式为 try 语句块1 catch 语句块2 end try语句先试探性执行语句块1，如果语句块1在执行过程中出现错误，则将错误信息赋给保留的lasterr变量，并转去执行语句块2。 循环结构 循环是指按照给定的条件，重复执行指定的语句。 for语句 for语句的格式为 for 循环变量=表达式1:表达式2:表达式3 循环体语句 end 其中，表达式1的值为循环变量的初值，表达式2的值为步长，表达式3的值为循环变量的终值。步长为1时，表达式2可以省略。 for语句更一般的格式为 for 循环变量=矩阵表达式 循环体语句 end 执行过程是依次将矩阵的各列元素赋给循环变量，然后执行循环体语句，直至各列元素处理完毕。 while语句 while语句的一般格式为 while(条件) 循环体语句 end break语句和continue语句 break语句用于终止循环的执行。当在循环体内执行到该语句时，程序将跳出循环，继续执行循环语句的下一语句。 continue语句控制跳过循环体中的某些语句。当在循环体内执行到该语句时，程序将跳过循环体中所有剩下的语句，继续下一次循环。 函数文件 函数文件的基本结构 函数文件由function语句引导，其基本结构为 function 输出形参表=函数名（输入形参表) 注释说明部分 函数体语句 其中，以function开头的一行为引导行，表示该M文件是一个函数文件。函数名的命名规则与变量名相同。输入形参为函数的输入参数，输出形参为函数的输出参数。当输出形参多于一个时，则应该用方括号括起来。 说明： （1）函数文件名通常由函数名再加上扩展名.m组成，不过函数文件名与函数名也可以不相同。当两者不同时，MATLAB将忽略函数名而确认函数文件名，因此，调用时使用函数文件名。 （2）注释说明包括如下3部分内容。 紧随函数文件引导行之后以%开头的第一注释行。这一行一般包括大写的函数文件名和函数功能简要描述，供lookfor关键词查询和help在线帮助用。 第一注释行及之后连续的注释行。通常包括函数输入输出参数的含义及调用格式说明等信息，构成全部在线帮助文本。 与在线帮助文本相隔一空行的注释行。包括函数文件编写和修改的信息，如作者、修改日期、版本等内容，用于软件档案管理。 采用help命令或lookfor命令可以显示出注释说明部分的内容，其功能和一般MATLAB函数的帮助信息是一致的。 利用help命令可查询fvector函数的注释说明： help fvector 再用lookfor命令在第一注释行查询指定的关键词： lookfor fvector （3）如果在函数文件中插入了return语句，则执行到该语句就结束函数的执行，程序流程转至调用该函数的位置。不写return语句，则执行完后，自动返回。 函数调用 函数调用的一般格式为 [输出实参表]=函数名(输入实参表) 函数调用时各实参出现的顺序、个数，应与函数定义时形参的顺序、个数一致，否则会出错。函数调用时，先将实参传递给相应的形参，从而实现参数传递，然后再执行函数的功能。 在MATLAB中。函数可以嵌套调用，即一个函数可以调用别的函数，甚至调用自身。一个函数调用它自身称为函数的递归调用。 函数参数的可调性 MATLAB在函数调用上有一个与一般高级语言不同之处，就是函数所传递参数数目的可调性。 在调用函数时，MATLAB用两个永久变量nargin和nargout分别记录调用该函数时的输入实参和输出实参的个数。只要在函数文件中包含这两个变量，就可以准确地知道该函数文件被调用时的输入/输出参数个数，从而决定函数如何进行处理。 全局变量与局部变量 在MATLAB中，函数文件中的变量是局部的，与其他函数文件及MATLAB工作空间相互隔离，即在一个函数文件中定义的变量不能被另一个函数文件引用。如果在若干函数中，都把某一变量定义为全局变量，那么这些函数将公用这一个变量。全局变量的作用域是整个MATLAB工作空间，即全程有效，所有的函数都可以对它进行存取和修改，定义全局变量是函数间传递信息的一种手段。 全局变量用global命令定义，格式为 global 变量名 在函数文件里，全局变量的定义语句应放在变量使用之前，为了便于了解所有的全局变量，一般把全局变量的定义语句放在文件的前部。 全局变量在结构化程序设计中，很少使用。尤其是当程序较大，子程序较多时，全局变量会给程序调试和维护带来不便。因此不提倡使用。如果一定要使用全局变量，最好起一个能反应变量含义的名字，以免和其他变量混淆。 第三章 图形绘制 二维曲线的绘制 二维曲线是将平面坐标上的数据点连接起来的平面图形。除直角坐标系外，还可采用对数坐标、极坐标。数据点可以是向量、矩阵，类型可以是实型和虚型。 绘制二维曲线 plot函数 绘制直角坐标系下的二维曲线，用 plot(x,y) 其中x和y为大小相同的向量，分别用于存储x坐标和y坐标数据。 输入参数变化形式说明： （1）当x和y是同维矩阵时，配对的x、y按对应列元素为横、纵坐标分别绘制曲线，曲线条数等于矩阵的列数。 （2）当plot函数只有一个输入参数时，即plot(y) 若y是实型向量，则以该向量元素的下标为横坐标、元素值为纵坐标画出一条连续曲线；若y是复数向量，则分别以向量元素实部和虚部为横、纵坐标绘制一条曲线。若y是实矩阵，则按列绘制每列元素值相对其下标的曲线，曲线条数等于输入参数矩阵的列数；若y是复数矩阵，则按列分别以元素实部和虚部为横、纵坐标绘制多条曲线。 3）当plot函数有多个输入参数，且都为向量时，即plot(x1,y1,x2,y2,…,xn,yn) 其中，x1和y1，x2和y2，……，xn和yn分别组成一组向量对，每一组向量对的长度可以不同。每一向量对可以绘制出一条曲线，这样可以在同一坐标内绘制出多条曲线。 具有两个纵坐标标度的图形 绘制出具有不同纵坐标标度的两个图形，可以使用plotyy绘图函数。这种图形有利于图形数据的对比分析。 plotyy(x1,y1,x2,y2) 其中，x1和y1对应一条曲线，x2和y2对应另一条曲线。横坐标的标度相同，纵坐标有两个，左纵坐标用于x1、y1数据对，右纵坐标用于x2、y2数据对。 设置曲线样式 MATLAB提供了一些绘图选项，用于确定所绘曲线的线型、颜色和数据点标记符号。 线型选项 选项 线型 - 实线(默认值) -. 点画线 -- 双画线 : 虚线 颜色选项 选项 颜色 b 蓝色 g 绿色 r 红色 m 品红色 c 青色 y 黄色 k 黑色 w 白色 符号标记选项 选项 符号标记 . 点 + 加号 * 星号 &lt; 朝左三角符号 &gt; 朝右三角符号 ^ 朝上三角符号 v 朝下三角符号 O 圆圈 X 叉号 s 方块符 d 菱形符 p 五角星符 h 六角星符 例如：“y:d”表示黄色虚线并用菱形符标记数据点。 要设置曲线样式可以在plot函数中加绘图选项，其调用格式为 plot(x1,y1,选项1,x2,y2,选项2,…,xn,yn,选项n) 图形标注与坐标控制 图形标注 在绘制图形的同时，可以对图形加上一些说明，如图形名称、坐标轴说明、图形某一部分的含义等，这些操作称为添加图形标注。有关图形标注函数的调用格式如下。 title（图形名称） xlabel（x轴说明） ylabel（y轴说明） text（x，y，图形说明） legend（图例1，图例2，……） title和xlabel、ylabel 函数分别用于说明图形和坐标轴的名称。 text函数是在（x，y）坐标处添加图形说明。 添加文本说明也可用gtext命令，执行该命令时，十字坐标光标自动跟随鼠标移动，单击鼠标即可将文本放置在十字光标处，如命令gtext('cos(x)')，即可放置字符串cos（x）。 legend函数用于绘制曲线所用线型、颜色或数据点标记图例，图例放置空白处，还可用鼠标将其拖动。 上标下标 如果想要在某个字符后面加上一个上标，则可以在该字符后面跟上一个^引导的字符串。 如果想要在某个字符后面加上一个下标，则可以在该字符后面跟上一个_引导的字符串。 坐标控制 MATLAB会根据要绘制曲线数据的范围，自动选择合适的坐标刻度。但可以自定义，其函数的调用格式为： axis([xmin xmax ymin ymax]) 系统按照给出的坐标轴的最小值和最大值选择坐标系范围。 axis函数的其他用法 axis auto：使用默认设置。 axis equal：纵、横坐标轴采用等长刻度。 axis square：产生正方形坐标系（默认为矩形）。 axis on/off：显示/取消坐标轴。 给坐标加网格线用grid命令来控制，加边框用box命令来控制。grid on/off命令控制是画还是不画网格线，box on/off命令控制是加还是不加边框线。 对函数自适应采用的绘图函数 使用plot函数绘图时，都是等间隔取点。 fplot函数可自适应地对函数进行采样，调用格式为 fplot(fname,lims,tol,选项) 其中，fname为函数名，以字符串形式出现。它可以是由多个分量函数构成的行向量，分量函数可以是函数的直接字符串，也可以是内部函数名或函数文件名，但自变量都必须为x。lims为x、y的取值范围，以行向量形式出现，取二元向量[xmin，xmax]时，x轴的范围被人为确定，取四元向量[xmin，xmax，ymin，ymax]时，x、y轴的范围被人为确定。tol为相对允许误差，其系统默认值为2e − 3。选项定义与plot函数相同。 多图形显示 图形窗口的分割 分割后的图形窗口由若干个绘图区组成，每一个绘图区可以建立独立的坐标系并绘制图形。同一图形窗口中的不同图形称为子图。MATLAB用subplot函数，将当前窗口分割成若干个绘图区。每个绘图区拥有独立坐标系，可以通过subplot函数激活，被激活的为活动区，所有绘图指令都只针对活动区。 调用格式为： subplot(m,n,p) 该函数将当前图形窗口分成m × n个绘图区，即每行n个，共m行，区号按行优先编号，且选定第p个区为当前活动区。在每一个绘图区允许以不同的坐标系单独绘制图形。 图形叠加 一般情况下，绘图命令每执行一次就刷新当前图形窗口，图形窗口原有图形将不复存在。若希望在已存在的图形上再叠加新的图形，可使用图形保持命令hold。hold on/off命令控制是保持原有图形还是刷新原有图形。 其他坐标系 对数坐标图形 控制理论中的Bode图采用的就是对数坐标。MATLAB提供的函数调用格式为： semilogx（x1，y1，选项1，x2，y2，选项2，……） semilogy（x1，y1，选项1，x2，y2，选项2，……） loglog（x1，y1，选项1，x2，y2，选项2，……） 其中，选项的定义与plot函数完全一致，所不同的是坐标轴的选取。semilogx函数使用半对数坐标，x轴为常用对数刻度，而y轴仍保持线性刻度。semilogy函数也使用半对数坐标，y轴为常用对数刻度，而x轴仍保持线性刻度。loglog函数使用全对数坐标，x、y轴均采用常用对数刻度。 极坐标图 极坐标图用一个夹角和一段相对中心点—极点的距离来表示数据。MATLAB中用polar函数来绘制极坐标图，其调用格式为 polar(theta,rho,选项) 其中，theta为极坐标极角，rho为极坐标矢径，选项的内容与plot函数相似。 其他二维图形 二维统计分析图 条形图 MATLAB中提供了多个函数可绘制各种条形图，bar函数绘制柱形图，barh函数绘制水平条形图，stem函数绘制杆图，errorbar函数绘制误差条图。下面以bar函数为例，说明条形图函数的用法。bar函数的基本用法与plot函数相似，其调用格式为 bar(x,width,style) 当x是m × n阶的矩阵时，绘制的条形图以分组或堆积的形式表现。矩阵中每一行元素绘制在一组中，每一列元素绘制在每组中相对应的位置上。其中，width设置条形的相对宽度和控制在一组内条形的间距，默认值为0.8，style指定条形的排列模式，类型有'group'（分组）和 'stack'（堆积），默认时采用'group'模式。 饼图 饼图能反映每一数值相对于总数值的大小。MATLAB中绘制饼图的函数是pie，其调用格式为 pie(x,explode) pie函数使用x中的数据绘制一个饼图，x可以是向量或矩阵。explode是与x同等大小的向量或矩阵，与explode的非零值对应的部分将从饼图中心分离出来。默认explode时，饼图是一个整体。 散点图 散点图是数据点在直角坐标系平面上的分布图。MATLAB中绘制散点图的函数是scatter，其调用格式为 scatter(x,y,s,c,'filled') 其中，x、y、s和c为同等大小的向量。x和y用于定位数据点；s指定绘图点的大小，s也可以是一个标量，则所有数据点同等大小；c指定绘图所使用的色彩，c也可以是一个标量，所有数据点使用同一种颜色；'filled'表示填充绘图点，默认时，数据点是空心的。 实心图 实心图是将数据的起点和重点连成多边形，并填充颜色。绘制实心图的函数是fill，其调用格式为 fill(x1,y1,选项1,x2,y2,选项2,…) fill函数按向量元素下标渐增次序依次用直线段连接x、y对应元素定义的数据点。假若这样连接所得折线不封闭，那么MATLAB将自动把该折线的首尾连接起来，构成封闭多边形，然后将多边形内部涂满指定的颜色。 复数向量图 MATLAB中除可以用plot函数绘制复数向量图外，还可用compass和feather函数，compass函数绘制围绕原点的罗盘图，feather函数绘制围绕x轴的羽毛图，其调用格式为 compass(z)或compass(u,v) featuher(z)或faether(u,v) 其中，z为复数向量，u、v分别为复数向量的实部和虚部。 三维图形的绘制 三维曲线 最基本的三维图形函数为plot3，其调用格式为 plot3(x1,y1,z1,选项1,x2,y2,z2,选项2,…,xn,yn,zn,选项n) 其中，每一组x，y，z组成一组曲线的坐标参数，选项的定义和plot函数相同。当x、y、z是同维向量时，则x、y、z对应元素构成一条三维曲线；当x、y、z是同维矩阵时，则以x、y、z对应列元素绘制三维曲线，曲线条数等于矩阵列数。 三维曲面 MATLAB中绘制三维网格图和曲面图，先要生成在x−y平面的网格数据，再以一组z轴的数据对应到这个二维的网格，然后调用绘图函数绘制。 产生三维数据 在MATLAB中产生三维图形数据的方法是：将x方向区间[a，b]分成m份，将y方向区间[c，d ]分成n份，由各划分点分别作平行于两坐标轴的直线，将区域[a，b] × [c，d ]分成m × n个小矩形，生成代表每一个小矩形顶点坐标的平面网格坐标矩阵，最后求对应网格坐标的Z矩阵。 MATLAB中的meshgrid函数可以将向量转换为矩阵。meshgrid函数的调用格式为 [X,Y]=meshgrid(x,y); 其中x、y为向量。 绘制三维曲面的函数 MATLAB提供了mesh函数和surf函数来绘制三维曲面图。mesh函数用于绘制三维网格图；surf用于绘制三维曲面图，各线条之间的补面用颜色填充。surf函数和mesh函数的调用格式为 mesh(x,y,z,c) surf(x,y,z,c) 一般情况下，x、y、z是维数相同的矩阵。x、y是网格坐标矩阵，z是网格点上的高度矩阵，c用于指定在不同高度下的颜色范围。c默认时，MATLAB认为c = z，即颜色的设定是正比于图形的高度的，这样就可以画出层次分明的三维图形。当x，y是向量时，要求x的长度等于z矩阵的列，y的长度等于z矩阵的行，x、y向量元素的组合构成网格点的x、y坐标，z坐标则取自z矩阵，然后绘制三维曲面图。 mesh:绘制三维网格图 meshc:绘制三维网格图，在xy平面上绘制曲面z轴方向的等高线 meshz:绘制三维网格图，在xy平面上绘制曲面底座 标准三维曲面 sphere函数 sphere函数用于绘制三维球面，其调用格式为 [x,y,z]=sphere(n) 该函数将产生（n + 1）×（n + 1）矩阵x、y、z，采用这3个矩阵可以绘制出圆心位于原点、半径为1的单位球体。若在调用该函数时不带输出参数，则直接绘制所需球面。n决定了球面的圆滑程度，其默认值为20。若n值取得较小，则将绘制出多面体表面图。 cylinder函数 cylinder函数用于绘制柱面，其调用格式为 [x,y,z]= cylinder(R,n) 其中，R是一个向量，存放柱面各个等间隔高度上的半径；n表示在圆柱圆周上有n个间隔点，默认时表示有20个间隔点。 peaks函数 peaks函数（多峰函数）常用于三维曲面的演示。该函数可以用来生成绘图数据矩阵。也可以根据网格坐标矩阵x、y重新计算函数值矩阵。生成的数值矩阵可以作为mesh、surf等函数的参数而绘制出多峰函数曲面图。另外，若在调用peaks函数时不带输出参数，则直接绘制出多峰函数曲面图。 其他三维图形 绘制二维图形时的条形图、饼图、杆图、填充图等特殊图形可以扩展为三维形式出现，使用的函数分别是bar3、bar3h、pie3、stem3和fill3。 三维统计分析图 bar3和bar3h函数绘制垂直和水平三维条形图，pie3函数绘制饼图。常用格式为 bar3(x,y) bar3h(x,y) pie3(x) 其中，x是向量，y是向量或矩阵，x向量元素的个数与y的行数相同。bar3和bar3h函数在x指定的位置上绘制y中元素的条形图，x默认时，若y是长度为n的向量，则x轴坐标从1变化到n；若y是m × n的矩阵，则x轴坐标从1变化到n，y中的元素按行分组。pie3函数用x中的数据绘制一个三维饼图。 三维多边形 fill3函数可在三维空间内绘制出多边形，并填充颜色。常用格式为 fill3(x,y,z,c) 其中，使用x,y,z作为多边形的顶点，而c指定填充的颜色。 其他三维图形 除了上面讨论的三维图形外，常用图形还有瀑布图、三维曲面的等高线图。绘制瀑布图用waterfall函数，它的用法及图形效果与meshz函数相似，只是它的网格线是在x轴方向出现，具有瀑布效果。等高线图分二维和三维两种形式，分别使用函数contour和contour3绘制。 contour(z); contour(z,n); contour(z,v); contour(X,Y,z); contour(X,Y,z,n); 图形修饰处理 视点处理 从不同的视点绘制的图形其形状是不一样的。视点位置可由方位角和仰角表示。方位角又称旋转角，它是视点与原点连线在xy平面上的投影与y轴负方向形成的角度，正值表示逆时针，负值表示顺时针。仰角又称视角，它是视点与原点连线与xy平面的夹角，正值表示视点在xy平面上方，负值表示视点在xy平面下方。 MATLAB提供了设置视点的函数view，其调用格式为 view(az,el) 其中，az为方位角，el为仰角，它们均以度为单位。系统默认的视点定义为方位角−37.5°，仰角30°。 色彩处理 颜色的向量表示 MATLAB除用字符表示颜色外，还可以用含有3个元素的向量表示颜色。向量元素的范围取值为[0，1]，3个元素分别表示红、绿、蓝3种颜色的相对亮度，称为RGB向量。 几种常见的RGB向量 RGB值 颜色 字符 [0 0 1] 蓝色 b [0 1 0] 绿色 g [1 0 0] 红色 r [0 1 1] 青色 c [1 0 1] 品红色 m [1 1 0] 黄色 y [0 0 0] 黑色 k [1 1 1] 白色 w [0.5 0.5 0.5] 灰色 [0.67 0 1] 紫色 [1 0.5 0] 橙色 [1 0.64 0.40] 铜色 [0.49 1 0.83] 宝石蓝 色图 色图（Color map）是MATLAB中的颜色参照表。色图以m × 3的数值矩阵表示，用于定义m种颜色，它的每一行对应某个颜色的RGB向量。色图保存着颜色从浓到淡或从一种颜色过渡到另一种颜色的所有中间颜色的值。除plot及其派生函数外，mesh、surf等函数均使用色图着色。MATLAB中使用函数colormap设置和获取图像显示用的颜色参照表，函数的调用格式为 colormap(m) 其中m代表色图。 三维表面图形的着色 三维表面图实际上就是在网格图的每一个网格片上涂上颜色。surf函数用默认的着色方式对网格片着色。此外，还可以用shading命令来改变着色方式，shading命令的调用格式为 shading 选项 其中，“选项”有如下3种取值。 faceted：将每个网格片用其高度对应的颜色进行着色，但网格线仍保留着，其颜色是黑色。这是系统的默认着色方式。 flat：将每个网格片用同一个颜色进行着色，且网格线也用相应的颜色，从而使得图形表面显得更加光滑。 interp：在网格片内采用颜色插值处理，绘制出的表面图显得最光滑。 光照处理 MATLAB提供了灯光设置的函数，其调用格式为 light(属性,选项) 常用属性有表示光的颜色的color属性、表示光源形式的style属性和表示光源位置的position属性。color属性的选项可取相应的颜色字符或RGB三元组。style属性的选项有'infinite'和'local'两个取值，分别表示无限远的平行光源和近光源。position属性的选项取三维坐标点组成的向量形式[x，y，z]。 图形的裁剪处理 MATLAB定义的NaN常数可以用于表示那些不可使用的数据，利用这种特性，可以将图形中需要裁剪部分对应的函数值设置成NaN，这样在绘制图形时，函数值为NaN的部分将不显示出来，从而达到对图形进行裁剪的目的。 隐函数绘图 如果给定了函数的显式表达式，可以先设置自变量向量，然后根据表达式计算出函数向量，从而用plot等函数绘制出图形。但如果函数用隐函数形式给出，则很难用上述方法绘制出图形。MATLAB提供了一个ezplot函数绘制二元隐函数图形和ezplot3函数绘制三元隐函数图形，下面介绍其用法。 ezplot函数 （1）对于一元函数f (x)，ezplot函数的调用格式为 ezplot(f,a,b) 在区间a &lt; x &lt; b绘制f (x)的图形。a、b默认时，在区间−2π\\piπ&lt; x &lt; 2π\\piπ绘制f = f (x)的图形。 （2）对于二元函数f (x,y)，ezplot函数的调用格式为 ezplot(f,a,b,c,d) 在区间a &lt; x &lt; b和c &lt; y &lt;d绘制f(x,y)的图形。a、b、c、d默认时，在区间−2π\\piπ&lt; x &lt; 2π\\piπ和−2π\\piπ &lt; y &lt;2π\\piπ绘制f (x,y)的图形。 （3）对于参数方程x = funx (t)和y = funy (t)，ezplot函数的调用格式为 ezplot(x,y, a,b) 在区间a &lt; t &lt; b绘制x = funx (t)和y = funy (t)的图形。a、b默认时，在区间0 &lt; t &lt; 2π\\piπ绘制图形。 ezplot3函数 ezplot3函数的调用格式为 ezplot3(x,y,z,[a,b]) 对于参数方程在区间a &lt; t &lt; b绘制x = funx (t)，y = funy (t) 和z = funz (t) 的图形。未指定区间时，默认在区间0 &lt; t &lt; 2π\\piπ 绘制图形。例如，绘制例3.13的三维曲线也可以采用以下命令： ezplot3('sin(t)+tcos(t)','cos(t)-tsin(t)','t',[0,10*pi]); 图像处理 MATLAB基本系统提供了几个用于简单图像处理的函数，利用这些函数可进行图像的读写和显示。此外，MATLAB还有一个功能更强的图像处理工具箱（Image Processing Toolbox），可以对图像进行更专业的处理。 imread和imwrite函数 imread函数用于将图像文件读入MATLAB工作空间，imwrite函数用于将图像数据和色图数据一起写入图像文件。函数的调用格式为 A=imread(fname) imwrite(A,fname,fmt) 其中，fname为读/写的图像文件名，fmt为图像文件格式，如'bmp'、'jpg'、'gif'、'tif'、'png'等。若读写的是灰度图像，则A为二维矩阵；若读写的是彩色图像，则A为三维矩阵，第三维存储颜色数据。 image和imagesc函数 image、imshow和imagesc函数用于显示图像。imagesc函数可以按照指定的色图显示灰度图像，色图可以通过colormap函数设置。 动画制作 MATLAB具有动画制作能力，它可以存储一系列各种类型的二维或三维图，然后像放电影一样把它们按次序播放出来，称为逐帧动画。一种明显的动画类型是取出一幅三维图形，然后缓慢地将它旋转，这样就可以从不同角度来观察它。另一种类型是在描绘质点运动轨迹的动画，称为轨迹动画。 创建逐帧动画 MATLAB提供getframe、moviein和movie函数进行逐帧动画制作。创建逐帧动画包括两个步骤。 （1）用getframe函数截取画面信息（一幅画面称为动画中的一帧）。 （2）movie(M,n)函数播放由矩阵M所定义的画面n次，默认时播放一次。矩阵M用来保存n幅画面的数据，每列存储一帧画面信息，以备播放。 创建轨迹动画 MATLAB中提供了comet和comet3函数展现质点在二维平面和三维空间的运动轨迹，其调用格式为 comet(x,y,p) comet3(x,y,z,p) 其中，每一组x、y、z组成一组曲线的坐标参数，用法与plot和plot3函数相同。选项p用于设置绘制的彗星轨迹线的彗长，彗长为p倍y向量的长度。 第四章 线性代数中的数值计算 特殊矩阵的生成 通用的特殊矩阵 ● zeros函数：产生全0矩阵，即零矩阵。 ● ones函数：产生全1矩阵，即幺矩阵。 ● eye函数：产生单位矩阵，即对角线上的元素为1、其余元素为0的矩阵。 ● rand函数：产生0～1均匀分布的随机矩阵。 ● randn函数：产生均值为0、方差为1的标准正态分布随机矩阵。 这几个函数的调用格式相似，如果这个函数的参数只是一个，那么MATLAB将会创建一个方阵，行数和列数均为这个参数；如果这个函数的参数有两个，那么第一个参数代表行数，第二个参数代表列数。下面以产生零矩阵的zeros函数为例进行说明。 zeros函数的调用格式如下。 ● zeros(m)：产生m × m零矩阵。 ● zeros(m,n)：产生m × n零矩阵。当m = n时，等同于zeros(m)。 ● zeros(size(A))：产生与矩阵A同样大小的零矩阵。 面向特定应用的特殊矩阵 魔方矩阵 魔方矩阵有一个有趣的性质，其每行、每列及两条对角线上的元素和都相等。对于n阶魔方阵，其元素由1，2，3，…，n2共n2个整数组成。MATLAB提供了求魔方矩阵的函数magic(n)，其功能是生成一个n阶魔方阵。 范得蒙矩阵 范得蒙（Vandermonde）矩阵的最后一列全为1，倒数第二列为一个指定的向量，其他各列是其后列与倒数第二列的点乘积。可以用一个指定向量生成一个范得蒙矩阵。在MATLAB中，函数vander(V)生成以向量V为基础向量的范得蒙矩阵。 希尔伯特矩阵 希尔伯特（Hilbert）矩阵是一种数学变换矩阵，它的每个元素hij = 1/(i + j − 1)。在MATLAB中，生成希尔伯特矩阵的函数是hilb(n)。 专门求希尔伯特矩阵的逆的函数invhilb(n) 托普利兹矩阵 托普利兹（Toeplitz）矩阵除第一行第一列外，其他每个元素都与左上角的元素相同。生成托普利兹矩阵的函数是toeplitz(x,y)，它生成一个以x为第一列、y为第一行的托普利兹矩阵。这里x、y均为向量，两者不必等长。toeplitz(x)用向量x生成一个对称的托普利兹矩阵。 伴随矩阵 生成伴随矩阵的函数是compan(p)，其中p是一个多项式的系数向量，高次幂系数排在前，低次幂排在后。 帕斯卡矩阵 我们知道，二次项(x + y)n展开后的系数随n的增大组成一个三角形表，称为杨辉三角形。由杨辉三角形表组成的矩阵称为帕斯卡（Pascal）矩阵，函数pascal(n)生成一个n阶帕斯卡矩阵。 矩阵分析 矩阵结构变换 对角阵 只有对角线上有非0元素的矩阵称为对角矩阵，对角线上的元素都为1的对角矩阵称为单位矩阵。 （1）提取矩阵的对角线元素 设A为m × n矩阵，函数diag(A)用于提取矩阵A主对角线元素，产生一个具有min(m,n)个元素的列向量。 diag(A,k) 提取第k条对角线的元素。主对角线为第0条对角线；与主对角线平行，往上为第1条，第2条，…，第n条对角线，往下为第 − 1条，第 − 2条，…，第 − n条对角线。 （2）构造对角矩阵 设V为具有m个元素的向量，diag(V,k)的功能是产生一个n × n（n = m + |k|）对角阵，其第k条对角线的元素即为向量V的元素。 省略k时，相当于k为0，其主对角线元素即为向量V的元素。 三角阵 三角阵又进一步分为上三角阵和下三角阵。所谓上三角阵，即矩阵的对角线以下的元素全为0的一种矩阵，而下三角阵则是对角线以上的元素全为0的一种矩阵。 与矩阵A对应的上三角阵B是与A具有相同的行数和列数的一个矩阵，并且B的对角线以上（含对角线）的元素和A对应相等，而对角线以下的元素等于0。求矩阵A的上三角阵的MATLAB函数是triu(A)。 triu(A,k)，其功能是求矩阵A的第k条对角线以上的元素。 在MATLAB中，提取矩阵A的下三角矩阵的函数是tril(A)和tril(A,k)。 矩阵的转置 所谓转置，即把源矩阵的第一行变成目标矩阵第一列，第二行变成第二列……依此类推。显然，一个m行n列的矩阵经过转置运算后，变成一个n行m列的矩阵。MATLAB中，转置运算符是单撇号(')。 矩阵的旋转 在MATLAB中，可以很方便地以90°为单位对矩阵A按逆时针方向进行旋转。利用函数rot90(A,k)将矩阵A旋转90°的k倍，当k为负整数时，对矩阵A按顺时针方向进行旋转；当k为1时可省略。 矩阵的翻转 矩阵的翻转分左右翻转和上下翻转。对矩阵实施左右翻转是将原矩阵的第一列和最后一列调换，第二列和倒数第二列调换……依此类推。 对矩阵A实施左右翻转的函数是fliplr(A)。 对矩阵A实施上下翻转的函数是flipud(A)。 矩阵求值 方阵的行列式值 把一个方阵看作一个行列式，并对其按行列式的规则求值，这个值就称为矩阵所对应的行列式的值。在MATLAB中，求方阵A所对应的行列式的值的函数是det(A)。 矩阵的秩 rank(A) 矩阵的迹 矩阵的迹即矩阵的对角线元素之和。 trace(A) 向量和矩阵的范数 函数norm用于计算矩阵或向量的范数，norm函数的格式如下。 ● norm(X,1)：求向量或矩阵X的1− 范数。 ● norm(X)、norm(X,2)：求向量或矩阵X的2− 范数。 ● norm(X,inf)：求向量或矩阵X的∞− 范数。 矩阵的条件数 条件数，用于判断矩阵是良性矩阵还是病态矩阵的参数。 良性矩阵:系数矩阵的微小变化不会导致解向量发生很大变化 病态矩阵:系数矩阵的个别元素的微小变化会导致解向量发生很大变化 矩阵A的条件数等于A的范数与A的逆矩阵的范数的乘积，即cond(A)=||A||*||A-1||。这样定义的条件数总是大于1的。条件数越接近于1，矩阵的性能越好，反之，矩阵的性能越差。A有3种范数，相应地可定义3种条件数。在MATLAB中，计算A的3种条件数的函数如下。 ● cond(A,1)：计算A的1−范数下的条件数。 ● cond(A)或cond(A,2)：计算A的2−范数数下的条件数。 ● cond(A,inf)：计算A的∞ −范数下的条件数。 矩阵的特征值与特征向量 对于n阶方阵A，求数λ和向量ζ，使得等式Aζ = λζ成立，满足等式的数λ称为A的特征值，而向量ζ称为A的特征向量。 在MATLAB中，计算矩阵A的特征值和特征向量的函数是eig(A)，常用的调用格式有如下3种。 ● E = eig(A)：求矩阵A的全部特征值，构成向量E。 ● [V,D] = eig(A)：求矩阵A的全部特征值，构成对角阵D，并求A的特征向量构成V的列向量。 ● [V,D] = eig(A,'nobalance')：与第2种格式类似，但第2种格式中先对A作相似变换后求矩阵A的特征值和特征向量，而格式3直接求矩阵A的特征值和特征向量。 一个矩阵的特征向量有无穷多个，eig函数只找出其中的n个，A的其他特征向量，均可由这n个特征向量的线性组合表示。 线性方程组求解 矩阵求逆及线性代数方程组求解 矩阵求逆 inv(A)函数用于计算方阵的逆矩阵。 利用矩阵求逆方法解线性方程组 inv(A)*B 利用左除运算符求解线性方程组 对于线性方程组Ax = b，可以利用左除运算符“\\”求解： x = A\\b 等效于inv(A)*B。 矩阵分解 矩阵分解是指根据一定的原理用某种算法将一个矩阵分解成若干个矩阵的乘积。常见的矩阵分解有LU分解、QR分解、Cholesky分解以及Schur分解、Hessenberg分解、奇异分解等。 矩阵的LU分解 矩阵的LU分解又称Gauss消去分解或三角分解，就是将一个方阵表示为一个行交换下三角矩阵和一个上三角矩阵的乘积形式。 MATLAB提供的lu函数用于对矩阵进行LU分解，其调用格式如下。 ● [L,U] = lu(X)：产生一个上三角阵U和一个变换形式的下三角阵L(行交换)，使之满足X = LU。注意，这里的矩阵X必须是方阵。 ● [L,U,P] = lu(X)：产生一个上三角阵U和一个下三角阵L以及一个置换矩阵P，使之满足PX = LU。当然矩阵X同样必须是方阵。 当使用第1种格式时，矩阵L往往不是一个下三角矩阵，但可以通过行交换成为一个下三角阵。 矩阵的QR分解 对矩阵X进行QR分解，就是把X分解为一个正交矩阵Q和一个上三角矩阵R的乘积形式。MATLAB的函数qr可用于对矩阵进行QR分解，其调用格式如下。 ● [Q,R] = qr(X)：产生一个一个正交矩阵Q和一个上三角矩阵R，使之满足X = QR。 ● [Q,R,E] = qr(X)：产生一个一个正交矩阵Q、一个上三角矩阵R以及一个置换矩阵E，使之满足XE = QR。 矩阵的Cholesky分解 如果矩阵X是对称正定的，则Cholesky分解将矩阵X分解成一个下三角矩阵和上三角矩阵的乘积。设上三角矩阵为R，则下三角矩阵为其转置，即X = R'R。MATLAB函数chol(X)用于对矩阵X进行Cholesky分解，其调用格式如下。 ● R = chol(X)：产生一个上三角阵R，使R'R = X。若X为非对称正定，则输出一个出错信息。 ● [R,p] = chol(X)：这个命令格式将不输出出错信息。当X为对称正定的，则p = 0，R与上述格式得到的结果相同；否则p为一个正整数。如果X为满秩矩阵，则R为一个阶数为q = p − 1的上三角阵，且满足R'R = X(1:q,1:q)。 超越函数运算 超越函数 MATLAB还提供了一些直接作用于矩阵的超越函数，如矩阵平方根函数sqrtm、矩阵指数函数expm、矩阵对数函数logm等，这些函数名都在上述内部函数名之后缀以m，并规定输入参数A必须是方阵。 通用矩阵函数funm funm(A,'fun')对方阵A计算由fun定义的函数的矩阵函数值。例如，当fun取exp时，funm(A,'exp')可以计算矩阵A的指数，与expm(A)的计算结果一样。 稀疏矩阵的处理 稀疏矩阵中具有大量的零元素，而仅含极少量的非零元素。 矩阵存储方式 完全存储方式: 矩阵的全部元素按列存储。以前讲到的矩阵的存储方式都是按这个方式存储的，此存储方式对稀疏矩阵也适用。例如，不论是m × n阶普通的还是稀疏的实矩阵均需要m × n个存储单元，而复矩阵还要翻倍。在这种方式下，矩阵中的全部零元素也必须输入。 稀疏存储方式: 仅存储矩阵所有的非零元素的值及其位置，即行号和列号。 矩阵的稀疏存储方式 将完全存储方式转化为稀疏存储方式 函数A = sparse(S)将矩阵S转化为稀疏存储方式的矩阵A。当矩阵S是稀疏存储方式时，则函数调用相当于A = S。 sparse函数还有其他一些调用格式。 ● sparse(m,n)：生成一个m × n的所有元素都是0的稀疏矩阵。 ● sparse(u,v,S)：u、v、S是3个等长的向量。S是要建立的稀疏矩阵的非0元素，u(i)、v(i)分别是S(i)的行和列下标，该函数建立一个max(u)行、max(v)列并以S为稀疏元素的稀疏矩阵。 和稀疏矩阵操作有关的函数。 ● [u,v,S] = find(A)：返回矩阵A中非0元素的下标和元素。这里产生的u、v、S可作为sparse(u,v,S)的参数。 ● full(A)：返回和稀疏存储矩阵A对应的完全存储方式矩阵。 产生稀疏存储矩阵 B = spconvert(A) 其中A为一个m × 3或m × 4的矩阵，其每行表示一个非0元素，m是非0元素的个数，A中每个元素的意义是： (i,1) 第i个非0元素所在的行； (i,2) 第i个非0元素所在的列； (i,3) 第i个非0元素值的实部； (i,4) 第i个非0元素值的虚部，若矩阵的全部元素都是实数，则无须第4列。 该函数将A所描述的一个稀疏矩阵转化为一个稀疏存储矩阵。 单位矩阵的稀疏存储 单位矩阵只有对角线元素为1，其他元素都为0，是一种具有稀疏特征的矩阵。函数eye产生一个完全存储方式的单位矩阵。MATLAB还有一个产生稀疏存储方式的单位矩阵的函数，这就是speye。函数speye(m,n)返回一个m × n的稀疏存储单位矩阵。 第五章 数据处理与多项式计算 第六章 数值微积分与常微分方程求解 第七章 符号计算 第八章 图形句柄 第九章 图形用户界面设计 第十章 Simulinl仿真环境 第十一章 MATLAB应用接口 第十二章 MATLAB的学科应用 如需转载、反馈、交流 联系站长 QQ：3168788134 ","link":"https://roboz-up.github.io/post/bi-ji-fang-zhen-cheng-xu-she-ji/"},{"title":"笔记：微机原理及接口技术","content":"⏰最后更新时间：2020.3.25 预 备 知 识 微处理器 微处理器即为CPU（Central Processing Unit）又叫中央处理器。 主要功能：运算和逻辑运算 内部结构分为：控制单元、算术逻辑单元和存储单元等几个部分。 按照其处理信息的字长可以分为：八位微处理器、十六位微处理器、三十二位微处理器以及六十四位微处理器等等。 微型计算机 微型计算机是以微处理器为核心，再配上存储器和接口电路等芯片构成的。 单片机 单片机(Microcontrollers)是一种集成电路芯片。 采用超大规模集成电路技术把具有数据处理能力的中央处理器CPU、数据存储器RAM、程序存储器ROM、多种I/O口和中断系统、定时器/计数器等功能(可能还包括显示驱动电路、脉宽调制电路、模拟多路转换器、A/D转换器等电路)集成到一块硅片上构成的一个小而完善的微型计算机系统。 嵌入式系统包括 嵌入式微控制器(16位、8位、以及8位以下的CPU，典型代表就是单片机) 嵌入式微处理器(32位，以及32位以上的称为处理器，典型为ARM核的处理器。) DSP(Digital Signal Processing，数字信号处理器) SOC(System on Chip， 片上系统，就是把所有的 模块都做到一块芯片上) 程序设计语言 程序设计语言通常分为三类：机器语言、汇编语言和高级语言。 机器语言 计算机能够直接识别的数据是由二进制数0和1组成的代码。 机器指令就是用二进制代码组成的指令，一条机器指令控制计算机完成一个基本操作。 用机器语言编写的程序是计算机惟一能够直接识别并执行的程序，而用其他语言编写的程序必须经过翻译才能变换成机器语言程序。 所以，机器语言程序被称为目标程序。 汇编语言 为了克服机器语言的缺点，人们采用助记符表示机器指令的操作码,用变量代替操作数的存放地址等，这样就形成了汇编语言。 汇编语言是一种用符号书写的、基本操作与机器指令相对应的、并遵循一定语法规则的计算机语言。 汇编语言是一种符号语言，比机器语言容易理解和掌握，也容易调试和维护。 但是，汇编语言源程序要翻译成机器语言程序才可以由计算机执行。 这个翻译的过程称为“汇编”，这种把汇编源程序翻译成目标程序的语言加工程序称为汇编程序。 用汇编语言编写的程序称为汇编源程序。 面向机器的低级语言 面向机器的低级语言，通常是为特定的计算机或计算机系列专门设计的。 保持了机器语言的优点，具有直接和简捷的特点。 可有效地访问、控制计算机的各种硬件设备, 如磁盘、存储器、CPU、I/O端口等。 目标代码简短，占用内存少，执行速度快， 是高效的程序设计语言。 经常与高级语言配合使用，应用十分广泛。 高级语言 高级程序设计语言接近于人类自然语言的语法习惯，与计算机硬件无关，易被用户掌握和使用。 C语言与汇编语言的区别 汇编语言是低级语言，在编写程序的时候会把根据不同的情况指定使用不同的寻址方式，能够对内存和CPU里的通用寄存器直接操纵。不同的计算机系列会有不同的汇编语言。注重描述过程。 C语言是高级语言，可以实现跨平台。编写程序无需指定CPU的指令执行情况，一段程序可以在不同体系结构的计算机上使用。注重描述结果。 汇编语言 汇编语言的特点 可直接控制硬件，充分发挥硬件功能。 汇编语言程序代码质量高，占用内存空间少，执行速度快。 应用优势 对于解决某些领域的问题，如操作系统，实时控制和处理、加密/解密、软件调试、病毒分析及逆向工程等领域具有独特的优势。 实际应用中 常常编写汇编语言子程序，解决如下的问题： （1）进行计算速度或代码长度优化 （2）存取系统资源 （3）直接访问硬件 （4）为不兼容的代码（编程环境）提供接口 缺点可移植性差、可读性差。 微机的性能指标 字长 指CPU内部一次能够处理的二进制数的位数。 存储容量 存储的二进制信息。一般以字节为单位来表示。 常用单位： b（bit）比特：一位二进制 B（byte）字节：8位二进制 Word 字 = 2Byte = 16bit KB:2^10=1024B=1KB MB:2^20=1024KB=1MB GB:2^30=1024MB=1GB TB:2^40=1024GB=1TB 运算速度: 主频：CPU的时钟频率,用来表示CPU的运算速度 外频：CPU的基准频率,是CPU与主板之间同步运行的速度 ,也是内存与主板之间**同步运行的速度 **。 倍频：指CPU外频与主频相差的倍数。 三者关系是：主频=外频*倍频。 运算速度的计算方法： （1）MIPS方法: 以每秒能执行几百万条指令来衡量。 （2）最短指令法: 以执行时间最短的指令为标准来计算 （3）直接计算法 :根据主频和指令的执行所需的时钟周期直接计算指令执行的时间。 CPU内核和I/O工作电压 内核电压的大小是根据CPU的生产工艺而定，一般制作工艺越小，内核工作电压越低。早期的CPU工作电压为5V,而奔腾可降到2V。 I/O工作电压在1.6-3V。 低电压能解决耗电过大和发热过高的问题。 扩展能力和外设配置 软件配置 第一章 微型计算机基础 1.1 计算机中数制与编码及其数的表示 计算机内部的信息分为两大类：控制信息和数据信息。 控制信息 是一系列的控制命令，用于指挥计算机如何操作。 数据信息 是计算机操作的对象，一般又可分为数值数据和非数值数据。 进位计数制 进制 符号 二进制 B 八进制 O/Q 十进制 D 十六进制 H 计数制的书写规则 为了区别不同的计数制，可采用下列两种方法： 1.在数字后面加写相应的英文字母作为标识，英文字母不分大小写。 2.在括号外面加数字下标。 数制之间的转换 十进制数与二进制数之间的转换 十进制整数转换成二进制整数 方法：除2取余法 注意：第一次得到的余数为二进制数的最低位，最后得到的余数为二进制数的最高位。 十进制小数转换成二进制小数 方法：乘2取整法 注意：最后将每次得到的整数部分（必定是0或1）按先后顺序从左到右排列即得到所对应二进制小数。 一般的十进制数转换成二进制数 为了将一个既有整数又有小数部分的十进制数转换成二进制数，可以将其整数部分和小数部分分别进行转换，然后再组合起来。 二进制数转换十进制数 方法：按位权展开后相加。 注意：用其各位所对应的系数，按“位权展开求和”的方法就可以得到，其基数为2。 十进制数与八进制数之间的转换 十进制整数转换成八进制整数 方法：除8取余法 注意：采用基数8连续去除该十进制整数，直至商等于“0”为止，然后逆序排列所得到的余数。 十进制小数转换成八进制小数 方法：乘8取整法 注意：连续用基数8去乘以该十进制小数，直至乘积的小数部分等于“0”，然后顺序排列每次乘积的整数部分。 八进制数转换成十进制数 方法：按位权展开后相加。 用其各位所对应的系数，按“位权展开求和”的方法就可以得到，其基数为8。 十进制与十六进制之间的转换 十进制整数转换成十六进制整数 方法：除16取余法 注意：采用基数16连续去除该十进制整数，直至商等于“0”为止，然后逆序排列所得到的余数。 十进制小数转换成十六进制小数 方法：乘16取整法 注意：连续用基数16去乘以该十进制小数，直至乘积的小数部分等于“0”，然后顺序排列每次乘积的整数部分。 十六进制数转换十进制数 方法：按位权展开后相加 注意：用其各位所对应的系数，按“位权展开求和”的方法就可以得到，其基数为16。 二进制与八进制、十六进制数之间的转换 2^3=8，所以每三位二进制数对应一位八进制数； 2^4=16，所以每四位二进制数对应一位十六进制。 二进制数转换成八进制数 从小数点所在位置分别向左向右每三位一组进行划分。 若小数点左侧的位数不是3的整数倍，在数的最左侧补零。 若小数点右侧的位数不是3的整数倍，在数的最右侧补零。 然后将每三位二进制数转换成对应的一位八进制数，即为二进制数对应的八进制数。 八进制数转换成二进制数 将每一位八进制数转换成对应的三位二进制数，即为八进制数对应的二进制数。 二进制数转换成十六进制数 从小数点所在位置分别向左向右每四位一组进行划分。 若小数点左侧的位数不是4的整数倍，在数的最左侧补零。 若小数点右侧的位数不是4的整数倍，在数的最右侧补零 。 然后将每四位二进制数转换成对应的一位十六进制数，即为二进制数对应的十六进制数。 十六进制数转换成二进制数 将每一位十六进制数转换成对应的四位二进制数，即为十六进制数对应的二进制数。 十六进制和二进制的相互转换 对于二进制整数，只要从右到左每4位组成一组，不足4位最左边补0，即可得到相应的十六进制。 对于二进制小数，只要从左到右每4位组成一组，不足4位最右边补0，即可得到相应的十六进制。 将十六进制转成二进制数，只要每一位十六进制数用四位二进制数表示即可。 常用的编码方法 计算机中数值型数据是用二进制数来表示的，而非数值型数据包括英文字母、标点符号、专用符号、汉字等，也是用二进制数来编码的。 十进制数的编码 BCD码 BCD（Binary-Coded Decimal）码又称为“二—十进制编码”，专门解决用二进制数表示十进数的问题。最常用的是8421编码，其方法是用4位二进制数表示1位十进制数，自左至右每一位对应的位权是8、4、2、1。 BCD码有两种格式： 1.压缩BCD码格式（Packed BCD Format） 用4个二进制位表示一个十进制位，就是用0000B-1001B来表示十进制数0-9。 例如：十进制数4256的压缩BCD码表示为： 0100 0010 0101 0110 B 2.非压缩BCD码格式（Unpacked BCD Format） 用8个二进制位表示一个十进制位，其中，高四位无意义，我们一般用xxxx表示，低四位和压缩BCD码相同。 例如：十进制数4256的非压缩BCD码表示为： xxxx0100 xxxx0010 xxxx0101 xxxx0110 B 非数值型数据的编码 字符编码 ASCII字符编码 即美国标准信息交换代码(American Standard Code for Information Interchance) ASCII码 用一个字节来表示一个字符，低7位为字符的ASCII值，最高位一般用作校验位。 ASCII码表有以下几个特点： 每个字符用7位基2码表示，其排列次序为B6 B5 B4 B3 B2 B1 B0。 ASCII码共编码了128个字符,它们分别是： 32个控制字符，主要用于通信中的通信控制或对计算机设备的功能控制，编码值为0～31（十进制）。 间隔字符（也称空格字符）SP，编码值为20H。 删除控制码DEL，编码值为7FH。 94个可印刷字符（或称有形字符）。 汉字的编码 计算机在处理汉字时，汉字字符也必须用基2码编码表示，一般汉字编码采用两个字节即16位二进制数。但由于汉字的特殊性，在汉字的输入、存储、输出过程中所使用的汉字编码是不一样的，输入时有输入编码，存储时有汉字机内码，输出时有汉字字形码。 汉字输入编码 为了能把汉字这种象形文字通过西文标准键盘输入到计算机内，就必须对汉字用键盘已有的字符设计编码，这种编码称为汉字的输入编码，又称为汉字外部码，简称外码。使用较多的有以下4类： ①顺序码：如区位码、电报码等。 ②音码：如拼音码、自然码等。 ③形码：如五笔字型、大众码等。 ④音形码：如双拼码、五十字元等。 汉字机内码 汉字机内码也称汉字内部码，简称内码。它是机器存储和处理汉字时采用的统一编码。每个汉字的机内码是惟一的，用两个字节表示。为了避免与西文字符的ASCII码之间产生二义性，汉字机内码中两个字节的最高位均规定为“1”。 汉字字形码 汉字字形码也叫汉字字模点阵码，是汉字输出时的字形点阵代码，是一串基2码编码。 逻辑数据的编码 逻辑数据是用来表示“是”与“否”，或称“真”与“假”两个状态的数据。 在计算机中，用“1”表示“真”或“是”，用“0”表示“假”或“否”。 需要注意的是，这里的1和0没有数值和大小概念，只有逻辑意义。 对逻辑数据只能进行逻辑运算，例如逻辑非、逻辑加、逻辑乘等基本逻辑运算和由基本逻辑运算构成的各种组合逻辑运算，运算结果仍是逻辑数据。 逻辑运算（按位操作） “与”运算（AND） “或”运算（OR） “非”运算（NOT） “异或”运算（XOR） 计算机中数的表示 真值与机器数 计算机中正负数的表示 最高位为符号位 符号位 = 0正数、 = 1 负数 有符号数与无符号数 无符号整数的编码 在某些情况下，计算机要处理的数据全是正数，此时机器数再保留符号位就没有意义了。这时，我们将机器数最高有效位也作为数值位处理。 无符号整数的表示范围为：0≤N≤2^n –1。 在计算机中最常见的无符号整数是地址。另外，双字长数据的低位字也是无符号整数。 要注意的是，计算机本身不论是对有符号数还是无符号数，总是按照补码的运算规则做运算。 原码 反码 补码 原码表示法 符号 + 绝对值 反码表示法 正数的反码同原码 负数的反码数值位与此负数原码数值位相反 补码（Two’s Complement）表示法 正数的补码： 同原码 负数的补码： （1）写出与该负数相对应的正数的补码 （2）按位求反 （3）末位加一 n位二进制补码的表数范围： - 2^(n-1) ≤ N ≤ 2^(n-1)-1 补码的加法和减法 求补运算 ：对一个二进制数按位求反、末位加一 加法规则：[X+Y]补码 = [X]补码 + [Y]补码 减法规则：[X-Y]补码 = [X]补码 + [-Y]补码 补码减法可转换为补码加法 进位和溢出 进位: 由于运算结果超出了位数,最高有效位向前的进位，这一位自然丢失，一般不表示结果的对错。 溢出：表示结果超出了字长允许表示的范围， 一般会造成结果出错。 1.2 微型计算机系统 典型的微型计算机硬件主要由微处理器、存储器、系统总线、I/O接口电路和I/O设备组成。 微处理器 微处理器也称中央处理器（CPU），是微型计算机的核心部件，芯片内集成了运算器、控制器和寄存器组，用来执行程序指令，完成所有的算术和逻辑运算及全机的控制工作。 存储器 存储器是微型计算机的重要组成部件，用来存放程序和数据。 微型计算机的存储器分为“主存”和“辅存”两类。 主存也称内存，CPU可以通过总线直接存取，微型计算机的主存储器主要都是采用半导体存储器，按照读写方式的不同，分为只读存储器ROM（Read Only Memory）和随机存取存储器RAM（Random Access Memory）两种类型。 辅存也称外存，如磁盘、磁带、光盘等，CPU通过I/O接口对其进行存取，它的容量比内存大很多，但存取信息的速度要比内存慢得多。一般程序（包括数据）是存放在外存中的，只有当运行时，才把它从外存传送到内存的某个区域，再由CPU控制执行。 系统总线 总线是指传送信息的一组公共导线，是计算机各功能部件之间进行信息传输的通道。CPU、存储器和I/O接口电路之间通过DB（数据总线）、AB（地址总线）和CB（控制总线）相连，这三组总线统称为系统总线。 数据总线 数据总线是用来传送数据信息的。 该总线是双向总线。 数据总线的位数（也称宽度）决定了一次能够传送数据的位数。 地址总线 地址总线是传送地址信息的。 该总线是单向总线，用来输出CPU要访问的内存单元或I/O端口的地址。 地址总线位数决定了CPU可以直接寻址的内存空间的大小，对于n条地址总线，可直接寻址的内存范围为2^n。 控制总线 控制总线是用来传送控制信息的。 这组信号线比较复杂，有的是微处理器送往存储器和I/O接口的控制信号，如读写控制信号、中断响应信号等；有的是将外界的请求或联络信号送往微处理器，如中断请求信号、准备就绪信号等。 采用标准的总线结构是微型计算机系统的显著特点之一。采用了总线结构后，一个部件只要符合总线标准，就可以连接到采用这种总线标准的系统中，使系统的功能可以很方便地得以扩展。 I/O接口电路和I/O设备 I/O设备是指微型计算机配备的输入输出设备，也称外围设备（简称外设），是微型计算机必不可少的组成部分。对外设的管理是汇编语言的重要应用之一。 由于微机的外部设备种类繁多、工作原理各异，它们不能直接连到微机系统总线上实现与主机通信，必须经过中间电路再与系统相连，通过该电路来完成数据缓冲、信号变换及与CPU联络等工作，这部分电路被称为I/O接口电路。 I/O接口电路一般由三种寄存器组成 数据寄存器：用来保存I/O设备和主机之间传送的数据。 状态寄存器：用来保存I/O设备或接口电路的状态信息，以便CPU在需要时可从中读取外设的状态，了解外设的工作情况。 控制寄存器：保存CPU给外设或接口电路的命令。CPU向控制寄存器写入命令，选择接口电路的工作方式或控制外设进行有关操作。 为便于主机访问外设，将I/O接口电路中每个寄存器统一编号，称为I/O端口地址或端口号。 8086的I/O地址空间为64KB，可寻址65536个不同的I/O地址，端口地址的范围是0000H~FFFFH。 软件 没有配置软件的计算机,什么工作也不能做，软件是计算机系统的重要组成部分。 微型计算机的软件分为系统软件和应用软件两大类。 系统软件是面向所有用户的一类软件，通常包括：操作系统（DOS、Windows、Linux等）、语言翻译程序、诊断调试程序、I/O驱动程序等。 系统软件的核心是操作系统，所有应用的程序都是在操作系统构筑的平台上运行的。 应用软件主要是指用户围绕某项应用编写的各种程序。 系统软件 核心为操作系统，包括：I/O驱动程序、文件管理程序、文本编辑程序等。 应用程序是建立在操作系统之上的，我们采用DOS（MS-DOS 6.22 或 Windows 的MS-DOS环境） 开发汇编语言程序涉及到 文本编辑器 汇编程序 连接程序 调试程序 1.3 微型计算机发展概述 双核技术 线程：程序由多个执行线程组成，这些线程是一系列相关指令。 超线程技术：专用于浮点和整数数学的逻辑。利用特殊的硬件指令，把两个逻辑内核模拟成两个物理片，让单个处理器都能使用线程级并行计算，进而兼容多线程操作系统和软件，减少了CPU的闲置时间，提高CPU的运行效率。 Intel双核采用多个核心共享前端总线的方式。Intel的架构会遇到多个内核争用总线资源的瓶颈问题。 AMD从一开始设计时就考虑到了对多核心的支持。所有组件都直接连接到CPU，消除系统架构方面的挑战和瓶颈。两个处理器核心直接连接到同一个内核上，核心之间以芯片速度通信，进一步降低了处理器之间的延迟。 AMD将两个内核做在一个Die（晶元）上，通过直连架构连接起来，集成度更高。Intel则是将放在不同Die（晶元）上的两个内核封装在一起。因此有人将Intel的方案称为“双芯”，认为 AMD的方案才是真正的“双核”。 第二章 微处理器的结构 8086/8088CPU的内部结构 8086微处理器——16位 特点： 内部结构和外部数据总线都是16位的，可进行8位（字节）和16位（字）算术运算和逻辑运算； 地址总线20位，可寻址1MB存储空间和64KB的I/O端口； 时钟频率为5MHz~8MHz； 支持单任务单用户操作：只允许登陆一个用户，同时只能运行一个程序。 8086/8088CPU功能结构 总线接口部件BIU 组成： 段寄存器、指令指针寄存器、地址加法器、指令队列和输入输出控制电路 功能： 取指令、指令排队、读/写操作数、地址转换、总线控制 段寄存器 4个16位的段寄存器，代码段寄存器CS、数据段寄存器DS、附加段寄存器ES和堆栈段寄存器SS。 用于存放代码段、数据段、附加段、堆栈段起始地址的高16位（段基值）。 指令指针寄存器（IP） 16位，用于存放下一条要执行指令在代码段中的偏移地址。 地址加法器 20位，用于将逻辑地址变成存储器的20位物理地址。 指令队列 6字节，用于存放从内存中取来的指令，按照先进先出的方式工作，并按顺序送到EU中执行。 其操作遵循下列原则： 每当指令队列缓冲器中存满一条指令后，EU就立即开始执行 指令队列缓冲器只要有2个空字节时，BIU就会自动把指令取到指令队列中，直到填满为止。 在执行转移、调用或返回指令时，接下去要执行的指令不再是程序中紧接着排列的那条指令了，这样，指令队列中已经装入的指令就没用了，则要清除指令队列缓冲器，并要求BIU从新地址开始取指令填入指令队列缓冲器。 总线控制电路 将CPU的内部总线与系统总线相连，产生和输出对外部操作的地址信号、数据信号、总线控制信号，以实现CPU与I/O设备、存储器间的数据传递，是CPU与内存单元或I/O端口交换数据的必经之路。 执行部件EU 组成 算术逻辑部件(ALU)、通用寄存器、标志寄存器、暂存器、控制器 功能 指令的执行、数据的运算、指令译码 通用寄存器 4个16位的数据寄存器AX、BX、CX、DX，用于存放8位数据； 4个16位的指针与变址寄存器SI、DI与SP、BP，用于存放偏移地址。 标志寄存器(FR) 16位的寄存器，用于存放运算结果的状态标志和控制标志。 算术逻辑部件(ALU) 用于完成8位或16位二进制算术和逻辑运算 执行部件控制电路 负责从总线接口部件（BIU）的指令队列缓冲器中取指令，并对指令进行译码，根据指令要求向执行部件内部个部分发出控制命令以完成各条指令的功能。 8086的寄存器结构 通用寄存器 8个16位寄存器AX、BX、CX、DX、BP、SP、SI、DI 8个8位寄存器AH、AL、BH、BL、CH、CL、DH、DL。 数据寄存器共有4个寄存器AX、BX、CX、DX，用来保存操作数或运算结果等信息。 AX 累加器 用于算术、逻辑运算以及与外设传送信息等。 在有些指令中要求必须使用AX或AL（称为隐含寻址），如乘除法指令和I/O指令。 BX 基址寄存器 在存储器寻址中，常用于存放操作数的16位偏移地址。 CX 计数器 一般作为循环或串操作等指令中的计数器。 在位操作中，当移多位时，要用CL来指明移位的位数。 DX 数据寄存器 在乘除法指令中与AX配合存放运算结果； 在I/O指令的间接寻址中，存放端口地址； 其他场合存放16位数据。 BP 基址指针寄存器 用MOV指令读/写堆栈中的数据时，用BP寻址堆栈的16位偏移地址。 SP 堆栈指针 在堆栈操作指令PUSH和POP中，用SP指向栈顶的偏移地址。 SP和BP通常和SS连用，可以对堆栈中的数据进行读/写操作。 SI 源变址寄存器 在串操作指令中，SI用于存放源操作数（源串）的偏移地址，并且SI的内容有自动加减修改功能； 在存储器寻址中，SI通常与DS联用，为程序访问当前数据段提供操作数的段内偏移地址。 DI 目的变址寄存器 在串操作指令中，DI用于存放目的操作数（目的串）的偏移地址，并且DI的内容有自动加减修改功能； 在存储器寻址中，DI通常与DS联用，为程序访问当前数据段提供操作数的段内偏移地址。 段寄存器 段寄存器用来存储20位起始地址的高16位（段基址或段基值）。 段寄存器是根据内存分段的管理模式而设置的。 内存单元的物理地址由段寄存器的值和一个偏移量组合而成的，这样可用两个较少位数的值组合成一个可访问较大物理空间的内存地址。 CS 代码段寄存器 用来存放程序的指令序列 代码段寄存器CS存放代码段的段地址 指令指针寄存器IP指示下条指令的偏移地址 即BIU里面的指令列队存放着下一条要执行的指令，而该指令的地址由两部分组成，一个是段首址，另一个是偏移地址，段首址存放在段寄存器CS中，而偏移地址就是IP （段基址+偏移地址=逻辑地址） （物理地址=存储器中真实地址） CPU利用（CS:IP）取得下一条要执行的指令 DS 数据段寄存器 存放运行程序所用的数据（地址） 数据段寄存器DS存放数据段的段地址 各种主存寻址方式（有效地址EA）得到存储器中操作数的偏移地址 CPU利用（DS:EA）存取数据段中某一存储单元的地址 SS 堆栈段寄存器 确定堆栈所在的主存区域 堆栈段寄存器SS存放堆栈段的段地址 堆栈指针寄存器SP指示堆栈栈顶的偏移地址 CPU利用（SS:SP）操作堆栈顶的地址 ES 附加段寄存器 一个段的空间最大是64KB。 要在2个相距超过64KB的单元传递数据，仅以DS为段址寄存器时，一般需要先设置DS为源数据单元所在的段址，读出数据后，再改变DS的值为接收数据的目的单元所在的段址，实现传递数据功能。如果不想频繁改变DS的值，可以使用ES。 IP 指令指针寄存器 16位寄存器 用于存放将要执行的指令在现行代码段中的偏移地址。 IP的内容是在启动程序执行时由系统自动设置的，程序在运行过程中，IP的内容由BIU自动修改，使IP始终指向下一条将要执行的指令地址。 正常情况，程序不能修改IP内容，但跳转指令或者调用指令会使IP的内容发生改变。 IP，它总是保存下一次将要从主存中取出指令的偏移地址，偏移地址的值为该指令到所在段段起始址的字节距离。 FR 标识寄存器 16位，在8086中只定义了9位。 状态标志 用来记录程序运行结果的状态信息，许多指令的执行都将相应地设置它。 状态标志：6个，用于表示运算结果特征，由CPU在运算过程中自动设置。 OF 溢出标志 运算结果是否超出及其所能表示的范围。溢出，OF=1，否则=0。 只对判有符号数的运算结果产生溢出有意义。 SF 符号标志 运算结果最高位的状态。运算结果为负数，SF=1，否则=0。 对于逻辑运算只表示结果的最高位是1或0，无实际意义。 ZF 零标志 运算结果是否为零，为零，ZF=1，否则=0。 CF 进位标志 计算结果使最高位产生进位或借位情况时，CF=1，否则=0。 AF 辅助进位标志 运算结果低4位向高4位有进位或借位时，AF=1，否则=0。 用于BCD码运算中的十进制调整指令。 PF 奇偶标志 运算结果中的低8位有偶数个1，PF=1，否则=0。 控制标志 可由程序根据需要用指令设置，用于控制处理器执行指令的方式。 控制标志：3个，用于控制CPU中断与执行方式，用户可以使用指令对这3位进行置位或清楚。 DF 方向标志 决定操作数的地址是按递增方式修改还是递减方式修改。 DF=0，则为递增方式，对于字节操作SI/DI自动加1，对于字操作SI/DI自动加2； DF=1，则为递减方式，对于字节操作SI/DI自动减1，对于字操作SI/DI自动减2。 DF的状态由STD指令置位和CLD指令清除。 I F 中断允许标志 控制INTR（屏蔽中断请求）输入引脚操作。 IF=1，INTR请求被允许，CPU响应中断请求，转去执行中断处理程序。 IF的状态由STI指令置位（开中断）和CLI指令清除（关中断）。 TF 单步标志（陷阱标志） 用于调试程序，以便找到错误或故障。 TF=1，CPU单步执行，每执行完一条指令就自动产生一个内部中断，使用户可逐条跟踪程序进行调试。 8086的存储器组织 存储器组织与数据存储格式 存储单元地址 8086系统中，为了标识和存取每一个存储单元，给每个存储单元规定一个编号。 存储单元的内容 一个存储单元中存放的信息称为该存储单元的内容。 8086的存储器空间为1MB，地址范围为00000H~FFFFFH。 注意 存储器以字节（8 bit）为编程单位 每个字节单元都有唯一的地址编码 地址用无符号整数来表示（编程用十六进制表示） 一个字要占用相继的两个字节 低位字节存入低地址，高位字节存入高地址 字单元地址用它的低地址来表示 奇地址存储体和偶地址存储体 将1MB存储空间分为两个512KB的存储体：奇地址存储体和偶地址存储体； 偶地址存储体与数据线的D7~D0相连，每个存储单元的地址为偶数地址； 奇地址存储体与数据线的D15~D8相连，每个存储单元的地址为奇数地址； CPU既可以单独对其中一个存储体读/写8位数据，也可以对两个存储体中相邻的两字节单元读/写16位数据。 8086指令系统中，字节和字两种操作指令。 字节数据：一个数据占用一个存储单元，有一个对应的唯一地址。 字数据：一个数据占用相邻两个存储单元，低地址存放低8位，高地址存放高8位，两个地址中较小的作为字的地址。 存储器分段结构 8086 CPU的地址总线是20位的，它最大可寻址空间为1MB，而8086的内部寄存器是16位寄存器，16位寄存器只能寻址2^16=64KB，为了能用16位寄存器来有效地访问1MB的存储空间， 8086 CPU采用了内存分段的管理模式。 8086把1MB存储空间分成若干个逻辑段，每个逻辑段最大为64KB，这样段内地址可以用16位表示，这样，系统的整个存储空间可分为16个互不重叠的逻辑段。 根据段内存放信息的不同分为 代码段——存放程序 数据段——存放数据 堆栈段——存放需要保存的信息 附加段——存放数据 逻辑地址与物理地址的转换 物理地址=段基值×10H + 偏移地址 物理地址 访问存储器的实际地址，一个存储单元对应唯一的一个物理地址。 逻辑地址 对应逻辑段内的一种地址表示形式，由段基值和段内偏移地址组成，表示为段基值： 偏移地址。其中，段基值由段寄存器提供，偏移地址由指令的寻址方式提供。 段基值 逻辑段20位起始地址中的高16位地址值。 起始地址=段基值+4个0 8086的工作模式及引脚信号 8086的工作模式 为了尽可能适应各种各样的使用场合，在设计8086 CPU芯片时， 使它们可以在两种模式下工作，即最小模式和最大模式。 最小模式 系统中只有一个8086微处理器，所有的总线控制信号都由8086直接产生。 MN/MX端接+5V，工作在最小模式； 有一片8284A，作为时钟信号发生器； 有三片8282或74LS273，用来作为地址信号的锁存器； 当系统中所连的存储器和外设端口较多时，需要增加数据总线的驱动能力，这时，需用2片8286/8287作为数据总线收发器。 最大模式 指系统中至少包含两个微处理器，其中一个为主处理器，即8086 CPU，其它的微处理器称之为协处理器，它们是协助主处理器工作的。 该模式适用于大中型规模的微机应用系统。 最小模式所拥有的配置； 有一片8288总线控制器来对CPU发出的控制信号进行变换和组合，以得到对存储器或I/O 端口的读/写信号和对锁存器8282及数据总线收发器8286的控制信号。 有8259A（可选）用以对多个中断源进行中断优先级的管理，但如果中断源不多，也可以不用中断优先级管理部件。 8087 是一种专用于数值运算的协处理器，它能实现多种类型的数值运算，如高精度的整型和浮点型数值运算，超越函数（三角函数、对数函数）的计算等，引入8087协处理器，可以把软件功能硬件化，大大的提高了主处理器的运行速度。 8089协处理器 在原理上有点象带有两个DMA通道的处理器，它有一套专门用于输入/输出操作的指令系统，但是8089又和DMA控制器不同，它可以直接为输入/输出设备服务，使主处理器不再承担这类工作。所以，在系统中增加8089协处理器之后，会明显提高主处理器的效率，尤其是在输入/输出操作比较频繁的系统中。 8086的引脚信号 AD15~AD0(Address Data Bus ，2~16) 地址/数据分时复用总线，三态、双向。在总线周期的T1状态，输出访问存储器或I/O端口的地址信息；在T2~T3状态，传递数据信息。 总线分时复用 总线分时复用就是同一总线在不同时间传输的是不同的信号，这些信号的作用是不同的。8086采用总线分时复用方法在不影响CPU功能的情况下，减少了CPU的引脚数目，使系统得到简化。 三态 三态是指总线输出可以有三个状态：高电平、低电平和高阻状态。当处于高阻状态时，该总线在逻辑上与所有连接负载断开。 A19/S6~A16/S3(Address Status Bus，35~38) 地址/状态分时复用线，三态输出。总线周期的T1状态，输出访问存储器的最高4位的地址，与AD15AD0一起构成20位地址码，访问I/O端口时A19A16无效。在总线周期的T2~T4用来输出状态信息。 状态信息号S6~S3作用如下： S6恒为0，表示8086当前与总线相连。 S5表明中断允许标志的当前设置。如果IF=1，则S5=1，表示允许可屏蔽中断请求；如果IF=0，则S5=0，表示禁止一切可屏蔽中断请求。 S4和S3组合使用，用于指出当前正在使用哪个段寄存器。 可屏蔽中断 可屏蔽中断属于外中断，是CPU可以不响应的中断。即当这种中断发生时，CPU可以不予以理睬，继续埋头做正在做的事；但CPU是否响应可屏蔽中断，要看标志寄存器的IF位的设置。当CPU检测到可屏蔽中断信息时，如果IF=1，则CPU必须响应；如果IF=0，CPU就不理它了，等于被屏蔽掉了。 BHE/S7（Bus High Enable/Status，34） S7在8086中未定义，作为备用状态信号。 高8位数据总线允许/状态复用线，三态输出。BHE在总线周期的T1状态输出，低电平有效，用来表示当前高8位数据总线D15~D8上数据有效。该引脚和地址总线A0（16）配合表示数据总线上的状态。 MN/MX(Minimum/Maximum Model Control，33) 最小/最大模式控制信号，输入。当接高电平（接+5V）时，8086工作在最小模式，系统的控制信号全部由8086提供；当接低电平（接地）时，8086工作在最大模式，8086发出的控制信号经总线控制器进行变换和组合后作为系统的控制信号。 RD(Read，32） 读信号，三态输出，低电平有效。低电平时，8086正在对存储器或I/O端口进行读操作。 TEST(Test，23) 测试信号，输入，低电平有效。TEST与等待指令WAIT配合使用。8086执行WAIT指令后，8086处于空转等待状态。TEST=1，则8086继续处于空转等待状态；TEST=0，退出等待状态，继续执行下一条指令。TEST信号用于多处理器系统中，实现8086主CPU与其他协处理器之间的同步协调功能。 READY(Ready，22) 准备就绪信号，输入，高电平有效。当READY为高电平时，表示内存或I/O设备的数据已准备就绪，可以立即进行一次数据传输。READY=1，则按正常时序进行读、写操作；READY=0，则表示存储器或I/O设备没有准备好数据，不能进行数据传输。 RESET(Reset，21) 复位信号，输入，高电平有效。复位后，8086内部寄存器初始化，除CS=FFFFH外，包括IP在内的其余寄存器的值均为0。复位后将从逻辑地址FFFFH：0000H处开始执行程序。一般在该地址放置一条转移指令，以转到程序真正的入口地址。 CLK(Clock，19) 系统时钟，输入。CLK提供8086和总线控制的基本定时脉冲。8086的系统时钟由时钟发生器8284产生。 VCC(40) 电源线，输入。8086电源为5V±10%。 GND(1、20) 地线，输入。 NMI(Non-Maskable Interrupt，17) 非屏蔽中断请求信号，输入，上升沿有效。NMI中断请求不受中断允许标志IF的控制，只要在该引脚有上升沿出现，在当前指令结束后8086立即进入非屏蔽中断请求处理。NMI中断通常用于系统紧急情况的处理，如系统电源掉电等。 INTR(Interrupt Request，18) 可屏蔽中断请求信号，输入，高电平有效。IF=1，且INTR接+5V时，8086在当前指令周期结束后进行INTR中断处理。 可屏蔽中断和非屏蔽中断的区别 可屏蔽中断和不可屏蔽中断都属于外部中断，是由外部中断源引起的；但它们也有区别：可屏蔽中断是通过CPU的INTR引脚引入，当中断标志IF＝1时允许中断，当IF=0时禁止中断，不可屏蔽中断是由NMI引脚引入，不受IF标志的影响。 最小模式下的24到31引脚 INTA(Interrupt Acknowledge，24） 中断响应信号，三态输出，低电平有效。INTA是对可屏蔽中断请求信号INTR的响应信号。INTR=1且IF=1时，8086响应INTR请求，向请求设备发送连续的两个INTA中断响应周期信号，表明8086进入了INTR中断处理过程。 ALE(Address Lock Enable，25) 地址锁存允许信号，三态输出，高电平有效。当地址/数据线上传送的是地址信息时，ALE信号有效，将地址/数据线上输出的地址信息所存。 DEN(Data Enable，26) 数据允许信号，三态输出，低电平有效。当地址/数据线上传送的是数据信息时，DEN信号有效。 DT/R(Data Transmit/Receive，27) 数据发送/接受控制信号，三态输出。用来控制数据总线上数据传送的方向，通常作为数据总线缓冲器的控制信号。当DT/R为高电平时，8086向存储器或I/O设备发送数据；当DT/R为低电平时，8086从存储器或I/O设备接受数据。 M/IO(Memory/Input &amp;Output，28) 存储器和I/O设备的选择信号，三态输出。数据传送时自动产生的输出信号，用来表示当前是访问存储器还是访问I/O设备。当M/IO为高电平时，表示与存储器传送数据；当M/IO为低电平时，表示与I/O设备传送数据。 WR (Write，29，三态) 写信号，三态输出，低电平有效。低电平时，8086正在度存储器或I/O端口进行写操作。 HOLD(Hold Reqest，31) 总线保持请求信号，输入，高电平有效。在最小工作模式中，当除8086 CPU以外的其他总线控制器要求占用总线时，可通过此引脚向CPU发送请求占用总线的信号。例如，系统中的DMA控制器就是通过此引脚向CPU申请使用系统总线的。 HLDA (Hold Acknowledge，30) 总线保持响应信号，输出，高电平有效。该信号是对HOLD的响应信号。当CPU检测到总线请求信号HOLD为高电平时，且CPU允许其他设备占用总线时，则在当前总线周期结束时，输出HLDA信号，作为对总线保持请求信号HOLD的响应，并立即使总线置为高阻状态，CPU放弃对总线的控制权。当获得总线使用权的控制器用完总线后，使HOLD信号变为低电平，表示放弃对总线的控制权。8086CPU检测到HOLD变为低电平后，会使HLDA变为低电平，恢复对总线的控制。 最大工作模式下的引脚信号 RQ/GT(Request/Grant，30、31) 总线请求输入/总线请求允许输出信号，双向，低电平有效。这两个信号是在最大模式系统中主CPU和其他协处理器(如8087、8089）之间交换总线使用权的联络控制信号。RQ为总线请求输入信号，GT为总线请求允许输出信号。 LOCK 总线封锁信号，三态输出，低电平有效。当LOCK为低电平时，CPU不允许其他总线主控设各占用总线。LOCK信号由指令前缀LOCK产生。在8086CPU处于2个INTA中断响应周期期间，LOCK信号会自动变为有效的低电平，以防止其他总线控制器在中断响应过程中占用总线而使一个完整的中断响应过程被间断。 S2、S1、S0(Bus Cycles Status) 总线周期状态信号，三态输出，低电平有效。 QS1,QS0 (Instruction Queue Status) 指令队列状态信号，输出。 8086的总线操作时序 时钟周期（Clock Cycle） 微处理器执行指令的最小时间单位，又称T状态。 例如，8086主频为5MHz，则1个时钟周期为200ns。 指令周期（Instruction Cycle，fetch-decode-execute cycle） CPU执行一条指令所需的时间。 总线周期（Bus Cycle） CPU对存储器或I/O端口完成一次读/写操作所需时间。 振荡周期=1/振荡频率 机器周期=12*振荡周期 总线操作步骤 总线操作 通过总线完成存储器读写、I/O读写等的一系列操作。 一个总线周期通常分为四个阶段 总线请求和仲裁阶段 当有多个模块提出总线请求时，必须由仲裁机构仲裁，确定将总线的使用权分配给哪个模块。 寻址阶段 取得使用总线权的模块经总线发出本次要访问的M或I/O端口的地址和有关命令。 传送数据阶段 主模块（指取得总线控制权的模块）与其它模块之间进行数据的传送。 结束阶段 主从模块将有关信息从总线上撤除，主模块交出总线的控制权。 8086的总线操作时序 总线操作 通过总线完成存储器读写、I/O读写等的一系列操作。 总线时序 与完成总线操作有关的地址线、数据线、控制线及时钟信号相互之间的先后关系，一般用时序图表示。 最小模式下的读总线周期 一个总线读周期由4个时钟周期T1~T4组成，每个时钟周期称为状态周期。 最小模式下的写总线周期 空闲周期 只有BIU与内存或I/O端口交换数据，以及填充指令队列时，BIU才执行总线周期。除此之外，既不需要填充指令队列，EU也没有向BIU发出总线周期请求时，系统总线就处于空闲状态，进入空闲周期，空闲周期由一个或几个TI状态组成。 在8086中，一个基本的总线周期由4个时钟周期组成。 第三章 指令系统 第四章 汇编语言及其程序设计 第五章 存储器 第六章 中断技术 第七章 I/O接口技术 第八章 D/A与A/D转换器接口 第九章 微机总线 第十章 人机交互接口 如需转载、反馈、交流 联系站长 QQ：3168788314 ","link":"https://roboz-up.github.io/post/bi-ji-wei-ji-yuan-li-ji-jie-kou-ji-zhu/"},{"title":"个人免费网站的创建","content":"📮基于Gridea和Github建立个人免费网站的经验分享。 ⏰最后更新时间：2020.3.22 环境搭建与准备 下载安装 Gridea Gridea 官网：https://gridea.dev/ 下载安装 Git Git 官网：https://git-scm.com/ 网速慢的小可爱可以使用 淘宝NPM镜像 https://npm.taobao.org/mirrors/git-for-windows/ 注册Github账号（已经有账号的小可爱直接跳过即可） Github 官网： https://github.com/ 注册Github账号教程 https://jingyan.baidu.com/article/86fae346e723303c49121abb.html/ 配置Gridea 创建Github仓库及其网站 登陆Github 新建仓库 获取Github私人Token令牌 令牌获取教程 https://blog.csdn.net/ltstud/article/details/75949726/ 建立Gridea远程连接 打开Gridea 进行配置 应用Gridea 配置完成后，先测试远程连接是否正常 点击同步，进行网页美化与内容同步 如需转载、反馈、交流 联系站长 QQ：3168788134 ","link":"https://roboz-up.github.io/post/ge-ren-wang-zhan-de-chuang-jian/"}]}